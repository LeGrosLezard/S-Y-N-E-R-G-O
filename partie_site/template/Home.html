
{% load static %}

<!DOCTYPE html>

    <html lang="fr-FR">
        
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
            <meta meta name="viewport" content="width=device-width, user-scalable=no" />

            

        </head>

        <body>


            <div class="section" id="1" style="background:red;">
                <a href="#2" id="to2">a</a>
            </div>

            <div class="section" id="2" style="background:blue;">
                <a href="#1">a</a>
                <a href="#3">a</a>
            </div>

            <div class="section" id="3" style="background:green;">
                <a href="#2">a</a>
                <a href="#4">a</a>
            </div>

            <div class="section" id="4" style="background:white;">
                <a href="#3">a</a>
                <a href="#5">a</a>
            </div>

            <div class="section" id="5" style="background:yellow">
                <a href="#4">a</a>
            </div>








        </body>


    </html>


















<style>
    body{
        font-family: proxima nova w15;
        font-size: 1rem;
        line-height: 25px;
        font-weight: 100;

    }

    html {
      scroll-behavior: smooth;
    }
    .section{
        width:100%;
        height:625px;
    }
</style>




<script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>


<script>
    //DEFILEMENT DE LA PAGE

    $(document).ready(function(){
        // au clic sur un lien
        $('a[href^="#"]').click(function(evt){
           // bloquer le comportement par défaut: on ne rechargera pas la page
           evt.preventDefault(); 
           // enregistre la valeur de l'attribut  href dans la variable target

     var target = $(this).attr('href');
           /* le sélecteur $(html, body) permet de corriger un bug sur chrome 
           et safari (webkit) */

     $('html, body')
           // on arrête toutes les animations en cours 
           .stop()
           /* on fait maintenant l'animation vers le haut (scrollTop) vers 
            notre ancre target */
           .animate({scrollTop: $(target).offset().top}, 800 );
        });
    });

</script>



<script>

    //SCROLL SECTION

    //A) - We recuperate current position on scrolling.
    function current_position(){
        var current_position = $(window).scrollTop()
        return current_position
    };


    //B) - We recuperate position in Y of our sections list.
    SECTIONS = ["#1", "#2", "#3", "#4", "#5"]
    function recuperate_element_position(){

        positions = []
        for (var i = 0; i < SECTIONS.length; i ++){

            //position of sections
            var localisation = jQuery(SECTIONS[i]).offset().top;
            positions.push(localisation)
        };
        return positions
    };



    //C) - Compare current position with section position.
    function on_scroll(positions, current_position){


        //We all sections position
        var minimum_index = 100000
        var indexage = 0

        for (var index = 0; index < positions.length; index ++){

            difference = Math.abs(positions[index] - current_position);
            if (difference < minimum_index){
                indexage = index;
                minimum_index = difference;
            };
        };

        return indexage
    };

    
    //D) - DIRECTION OF SCROLL

    var LASTSCROLL = 0;
    function sens_of_scroll(){

       var sens = 0

       var current_scroll = $(this).scrollTop();

       if (current_scroll > LASTSCROLL){sens = -1}
       else {sens = 1}

       LASTSCROLL = current_scroll;

       return sens
    };




    //E) - CLICK CLICK
    function go_to_next_section_effect_smooooth(section, direction){
        if(section == 0 && direction == 1){
            {}
        }else if(section == 0 && direction == -1){
            document.getElementById("to2").click();
        }


    };




    //ON SCROLL
    $( window ).scroll(function() {

        
        //1) - Recuperate positions of section.
        positions = recuperate_element_position();
             
        //2) - Identify current section.
        current_pos = current_position()

        //3) - Identify the current position
        indexage = on_scroll(positions, current_pos)
        //console.log("la section la plus proche est :", indexage)

        //4) - Identify scroll direction.
        direction = sens_of_scroll()
        //if(direction == -1){console.log("bas")};
        //if(direction == 1){console.log("haut")};

        //5) scroll smooth.
        go_to_next_section_effect_smooooth(indexage, direction)
    });
 
</script>

















